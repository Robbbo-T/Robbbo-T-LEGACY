{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://aqa.example/schemas/requirements.item.schema.json",
  "title": "AMPEL360 Requirement Item",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "id", "text", "source", "driver", "acceptance", "verification",
    "links", "status", "owner", "last_updated", "criticality", "priority",
    "rationale", "assumptions", "constraints", "verification_methods",
    "traces", "compliance"
  ],
  "properties": {
    "id": { "type": "string", "minLength": 6 },
    "text": { "type": "string", "minLength": 10 },
    "source": { "type": "string", "minLength": 2 },
    "driver": { "type": "string", "enum": ["performance","safety","sustainability","regulatory"] },
    "acceptance": { "type": "string", "minLength": 3 },
    "verification": { "type": "string", "enum": ["Analysis","Test","Inspection","Review"] },
    "links": {
      "type": "object",
      "additionalProperties": false,
      "required": ["ce","cc","ci"],
      "properties": {
        "ce": { "type": "string", "minLength": 8 },
        "cc": { "type": "string", "minLength": 8 },
        "ci": { "type": "string", "minLength": 8 }
      }
    },
    "status": { "type": "string", "enum": ["draft","baselined","archived"] },
    "owner": { "type": "string", "minLength": 2 },
    "last_updated": { "type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$" },
    "criticality": { "type": "string", "enum": ["DAL-A","DAL-B","DAL-C","DAL-D","DAL-E"] },
    "priority": { "type": "string", "enum": ["high","medium","low"] },
    "rationale": { "type": "string", "minLength": 3 },
    "assumptions": { "type": "string", "minLength": 2 },
    "constraints": { "type": "string", "minLength": 2 },
    "verification_methods": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["method","description","success_criteria"],
        "properties": {
          "method": { "type": "string", "enum": ["Analysis","Test","Inspection","Review"] },
          "description": { "type": "string", "minLength": 10 },
          "success_criteria": { "type": "string", "minLength": 5 }
        }
      }
    },
    "traces": {
      "type": "object",
      "required": ["upstream"],
      "properties": {
        "upstream": {
          "type": "array",
          "items": { "type": "string", "minLength": 3 }
        },
        "downstream": {
          "type": "array",
          "items": { "type": "string", "minLength": 3 }
        }
      }
    },
    "compliance": {
      "type": "object",
      "required": ["standards"],
      "properties": {
        "standards": { "type": "string", "minLength": 3 },
        "regulations": { "type": "string", "minLength": 2 }
      }
    }
  }
}